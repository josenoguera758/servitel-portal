<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Login - Servitel WiFi</title>
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="expires" content="-1" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			background: linear-gradient(135deg, #00d4aa 0%, #00b8d4 50%, #0099cc 100%);
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
			padding: 20px;
		}

		.login-container {
			background: rgba(255, 255, 255, 0.95);
			border-radius: 20px;
			padding: 40px 30px;
			max-width: 500px;
			width: 100%;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
			animation: fadeInUp 0.6s ease-out;
		}

		@keyframes fadeInUp {
			from {
				opacity: 0;
				transform: translateY(30px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		#ads {
			text-align: center;
			margin-bottom: 30px;
			animation: fadeIn 0.8s ease-out 0.2s both;
		}

		#ads img {
			max-width: 280px;
			height: auto;
			filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3)) drop-shadow(0 4px 12px rgba(0, 180, 212, 0.4));
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
			}
			to {
				opacity: 1;
			}
		}

		.welcome-text {
			text-align: center;
			color: #333;
			font-size: 24px;
			font-weight: 600;
			margin-bottom: 30px;
			animation: fadeIn 0.8s ease-out 0.3s both;
		}

		.client-selection {
			text-align: center;
			margin: 30px 0;
			animation: fadeIn 0.8s ease-out 0.4s both;
		}

		.client-selection p {
			color: #333;
			font-size: 18px;
			font-weight: 600;
			margin-bottom: 20px;
		}

		.client-selection label {
			display: inline-block;
			margin: 0 10px;
			padding: 12px 24px;
			background: white;
			border: 2px solid #00b8d4;
			border-radius: 30px;
			cursor: pointer;
			transition: all 0.3s ease;
			font-size: 16px;
			color: #333;
		}

		.client-selection label:hover {
			background: linear-gradient(135deg, #00d4aa 0%, #00b8d4 100%);
			color: white;
			border-color: #00d4aa;
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(0, 180, 212, 0.3);
		}

		.client-selection input[type="radio"] {
			margin-right: 8px;
		}

		.client-selection label:has(input:checked) {
			background: linear-gradient(135deg, #00d4aa 0%, #00b8d4 100%);
			color: white;
			border-color: #00d4aa;
			box-shadow: 0 5px 15px rgba(0, 180, 212, 0.4);
		}

		.form-section {
			display: none;
			animation: slideIn 0.4s ease-out;
		}

		.form-section.active {
			display: block;
		}

		@keyframes slideIn {
			from {
				opacity: 0;
				transform: translateX(-20px);
			}
			to {
				opacity: 1;
				transform: translateX(0);
			}
		}

		.form-section p b {
			color: #333;
			font-size: 20px;
			display: block;
			text-align: center;
			margin-bottom: 20px;
		}

		label {
			display: block;
			color: #555;
			font-weight: 500;
			margin-bottom: 8px;
			margin-top: 15px;
			font-size: 14px;
		}

		input[type="text"],
		input[type="email"] {
			width: 100%;
			padding: 12px 15px;
			border: 2px solid #e0e0e0;
			border-radius: 8px;
			font-size: 16px;
			transition: all 0.3s ease;
			background: white;
		}

		input[type="text"]:focus,
		input[type="email"]:focus {
			outline: none;
			border-color: #00b8d4;
			box-shadow: 0 0 0 3px rgba(0, 184, 212, 0.1);
			transform: translateY(-1px);
		}

		.survey-question {
			text-align: center;
			margin: 25px 0;
			padding: 20px;
			background: #f8f9fa;
			border-radius: 12px;
		}

		.survey-question p {
			color: #333;
			font-weight: 500;
			margin-bottom: 15px;
		}

		.survey-question label {
			display: inline-block;
			margin: 0 15px;
			cursor: pointer;
			transition: transform 0.2s ease;
		}

		.survey-question label:hover {
			transform: scale(1.05);
		}

		.validate-btn, .submit-btn {
			background: linear-gradient(135deg, #00d4aa 0%, #00b8d4 100%);
			color: white;
			padding: 14px 40px;
			border: none;
			border-radius: 30px;
			cursor: pointer;
			font-size: 18px;
			font-weight: 600;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(0, 180, 212, 0.3);
			display: inline-block;
		}

		.validate-btn:hover, .submit-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(0, 180, 212, 0.4);
			background: linear-gradient(135deg, #00e0bb 0%, #00c4e0 100%);
		}

		.validate-btn:active, .submit-btn:active {
			transform: translateY(0);
		}

		.footer-text {
			margin-top: 30px;
			animation: fadeIn 1s ease-out 0.6s both;
		}

		.footer-text p {
			margin: 8px 0;
			color: #666;
			font-size: 14px;
			text-align: center;
		}

		.footer-text .top-link {
			color: #00b8d4;
			font-weight: 600;
		}

		.footer-text .company {
			color: #999;
			font-size: 12px;
			margin-top: 15px;
		}

		/* Responsive */
		@media (max-width: 600px) {
			.login-container {
				padding: 30px 20px;
			}

			.client-selection label {
				display: block;
				margin: 10px 0;
			}

			.welcome-text {
				font-size: 20px;
			}
		}

		/* Ocultar iframe de webhook */
		iframe[name="webhook_iframe"] {
			display: none;
		}
	</style>
</head>

<body>
	<div class="login-container">
		<div id="ads">
			<img src="ads.png" alt="Servitel Logo" />
		</div>

		<p class="welcome-text">Bienvenido a la Zona WiFi de Servitel</p>

		<!-- Selecci√≥n de tipo de usuario -->
		<div class="client-selection">
			<p>¬øEres cliente de Servitel?</p>
			<label>
				<input type="radio" name="clientType" value="client" onchange="showClientForm()">
				<span>S√≠, soy cliente</span>
			</label>
			<label>
				<input type="radio" name="clientType" value="noClient" onchange="showNonClientForm()">
				<span>No soy cliente</span>
			</label>
		</div>

		<!-- Formulario para CLIENTES -->
		<div id="clientForm" class="form-section">
			<p><b>Validaci√≥n de Cliente</b></p>
			
			<form id="clientFormElement" method="GET" target="webhook_iframe" onsubmit="return handleClientSubmit()">
				<input type="hidden" name="type" value="client">
				<input type="hidden" name="mac" id="client_mac">
				<input type="hidden" name="ap" id="client_ap">
				<input type="hidden" name="ssid" id="client_ssid">
				
				<label for="cedula">N√∫mero de C√©dula</label>
				<input type="text" id="cedula" name="cedula" placeholder="Ejemplo: 12345678" required pattern="\d+">

				<p style="text-align:center; margin-top:25px;">
					<button type="submit" class="validate-btn">
						Validar y Conectar
					</button>
				</p>
			</form>
		</div>

		<!-- Formulario para NO CLIENTES -->
		<div id="nonClientForm" class="form-section">
			<p><b>Realiza esta encuesta r√°pida y navega GRATIS</b></p>

			<form id="nonClientFormElement" method="GET" target="webhook_iframe" onsubmit="return handleGuestSubmit()">
				<input type="hidden" name="type" value="guest">
				<input type="hidden" name="mac" id="guest_mac">
				<input type="hidden" name="ap" id="guest_ap">
				<input type="hidden" name="ssid" id="guest_ssid">
				
				<label for="name">Nombre y Apellido</label>
				<input type="text" id="name" name="name" required>

				<label for="phone">Tel√©fono</label>
				<input type="text" id="phone" name="phone" required pattern="\d{7,15}">

				<label for="email">Correo</label>
				<input type="email" id="email" name="email" required>

				<div class="survey-question">
					<p>¬øEstar√≠a interesado en adquirir nuestros servicios?</p>
					<label>
						<input type="radio" name="interested" value="Si" required> S√≠
					</label>
					<label>
						<input type="radio" name="interested" value="No"> No
					</label>
				</div>

				<p style="text-align:center; margin-top:10px;">
					<button type="submit" class="submit-btn">
						Ingresar
					</button>
				</p>
			</form>
		</div>

		<div class="footer-text">
			<p class="top-link"><b>www.servitel.net.ve</b></p>
			<p class="top-link"><b>@servitel.ve</b></p>
			<p class="top-link"><b>@servitelsport</b></p>
			<p class="company">
				<small>
					Conetcom Telecomunicaciones S.A.<br>
					Rif: J30922497-2
				</small>
			</p>
		</div>
	</div>

	<!-- Iframe oculto para enviar webhook sin salir de la p√°gina -->
	<iframe name="webhook_iframe"></iframe>

	<script>
		// Configuraci√≥n
		const WEBHOOK_URL = 'http://n8n.telecom.com.ve/webhook-test/servitel-zona-wifi';

		// Obtener par√°metros de Omada desde la URL
		const urlParams = new URLSearchParams(window.location.search);
		const omadaData = {
			mac: urlParams.get('client_mac') || urlParams.get('mac') || '',
			ap: urlParams.get('ap_mac') || urlParams.get('ap') || '',
			ssid: urlParams.get('ssid') || '',
			redirectUrl: urlParams.get('url') || urlParams.get('redirect_url') || ''
		};

		console.log('üåê Par√°metros de Omada:', omadaData);

		// Llenar campos ocultos con datos de Omada
		function fillOmadaData() {
			// Formulario de clientes
			document.getElementById('client_mac').value = omadaData.mac;
			document.getElementById('client_ap').value = omadaData.ap;
			document.getElementById('client_ssid').value = omadaData.ssid;
			
			// Formulario de invitados
			document.getElementById('guest_mac').value = omadaData.mac;
			document.getElementById('guest_ap').value = omadaData.ap;
			document.getElementById('guest_ssid').value = omadaData.ssid;
		}

		// Mostrar formulario de clientes
		function showClientForm() {
			document.getElementById('clientForm').classList.add('active');
			document.getElementById('nonClientForm').classList.remove('active');
			fillOmadaData();
		}

		// Mostrar formulario de invitados
		function showNonClientForm() {
			document.getElementById('nonClientForm').classList.add('active');
			document.getElementById('clientForm').classList.remove('active');
			fillOmadaData();
		}

		// Manejar env√≠o del formulario de clientes
		function handleClientSubmit() {
			const cedula = document.getElementById('cedula').value.trim();
			
			if (!cedula || !/^\d+$/.test(cedula)) {
				alert('Por favor ingrese un n√∫mero de c√©dula v√°lido (solo n√∫meros).');
				return false;
			}

			// Cambiar la acci√≥n del formulario al webhook
			document.getElementById('clientFormElement').action = WEBHOOK_URL;
			
			// Esperar que se env√≠e el webhook y luego redirigir a Omada
			setTimeout(function() {
				if (omadaData.redirectUrl) {
					window.location.href = omadaData.redirectUrl;
				} else {
					alert('‚úÖ Datos enviados. Conectando...');
				}
			}, 1000);
			
			return true;
		}

		// Manejar env√≠o del formulario de invitados
		function handleGuestSubmit() {
			const name = document.getElementById('name').value.trim();
			const phone = document.getElementById('phone').value.trim();
			const email = document.getElementById('email').value.trim();
			const interested = document.querySelector('input[name="interested"]:checked');
			
			if (!name) {
				alert('Por favor ingrese su Nombre y Apellido.');
				return false;
			}
			
			if (!phone || !/^\d{7,15}$/.test(phone)) {
				alert('Por favor ingrese un n√∫mero de tel√©fono v√°lido (7-15 d√≠gitos).');
				return false;
			}
			
			if (!email) {
				alert('Por favor ingrese su correo.');
				return false;
			}
			
			if (!interested) {
				alert('Por favor seleccione si est√° interesado en adquirir nuestros servicios.');
				return false;
			}

			// Cambiar la acci√≥n del formulario al webhook
			document.getElementById('nonClientFormElement').action = WEBHOOK_URL;
			
			// Esperar que se env√≠e el webhook y luego redirigir a Omada
			setTimeout(function() {
				if (omadaData.redirectUrl) {
					window.location.href = omadaData.redirectUrl;
				} else {
					alert('‚úÖ Datos enviados. Conectando...');
				}
			}, 1000);
			
			return true;
		}

		// Inicializar
		fillOmadaData();
	</script>
</body>

</html>
